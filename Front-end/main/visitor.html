<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</title>
  <link rel="stylesheet" href="main.css" />
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <div class="overlay" id="overlay"></div>

  <div class="sidebar-btn" id="sidebarBtn">
    <i class="fas fa-bars"></i>
  </div>

  <div class="sidebar" id="sidebar">
    <div class="logo-container-sidebar">
      <img src="../Image/logo.png" alt="‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏Å‡∏∏‡∏•‡∏à‡∏¥‡∏ô‡∏ï‡πå Logo" class="sidebar-logo">
      <div class="close-btn" id="closeSidebarBtn">&times;</div>
    </div>

    <nav class="sidebar-menu">
      <a href="main.html" class="menu-item"><i class="fas fa-home"></i><span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span></a>
      <a href="history.html" class="menu-item"><i class="fas fa-id-card"></i><span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span></a>
      <a href="award.html" class="menu-item"><i class="fas fa-award"></i><span>‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à</span></a>
      <a href="staff.html" class="menu-item"><i class="fas fa-user"></i><span>‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</span></a>
      <a href="visitor.html" class="menu-item"><i class="fas fa-users"></i><span>‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</span></a>
      <a href="Activity.html" class="menu-item"><i class="fas fa-camera"></i><span>‡∏†‡∏≤‡∏û‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</span></a>
      <a href="https://www.facebook.com/groups/173373042841553/" target="_blank" class="menu-item"><i class="fas fa-comments"></i><span>‡∏ñ‡∏≤‡∏°-‡∏ï‡∏≠‡∏ö</span></a>
      <a href="news.html" class="menu-item"><i class="fas fa-book-open"></i><span>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</span></a>
      <a href="contact.html" class="menu-item"><i class="fas fa-phone"></i><span>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</span></a>
    </nav>
  </div>

  <div class="main-container">
    <header>
      <div class="logo-container">
        <div class="logo">
          <img src="../Image/logo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ">
        </div>
        <div>
          <div class="school-name">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏Å‡∏∏‡∏•‡∏à‡∏¥‡∏ô‡∏ï‡πå</div>
          <div class="school-name-en">Kunlajin Kindergarten</div>
        </div>
      </div>
      <div class="hamburger" id="hamburgerBtn">
        <i class="fas fa-bars"></i>
      </div>
    </header>

    <div class="hero">
      <div class="hero-text">
        ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå<br>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏Å‡∏∏‡∏•‡∏à‡∏¥‡∏ô‡∏ï‡πå
      </div>
      <div class="motto-banner">
        "‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ô‡∏≥‡∏ä‡∏∏‡∏°‡∏ä‡∏ô"
      </div>
    </div>

    <div class="main-contents">
      <div class="visitors-section">
        <div class="announcement-header">
          <div class="bell-icon">üîî</div>
          <div>‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</div>
        </div>
      
        <div class="logo-center">
          <img src="../Image/logo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ">
        </div>
      
        <div class="visitors-gallery">
          <!-- JS ‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        </div>
      
        <!-- ‚úÖ Footer ‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô visitors-section -->
        <footer>
          <div class="school-footer-name">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏Å‡∏∏‡∏•‡∏à‡∏¥‡∏ô‡∏ï‡πå</div>
          <div class="school-address">1 ‡∏ñ‡∏ô‡∏ô‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥ ‡∏ï‡∏≥‡∏ö‡∏•‡∏´‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏´‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏á‡∏Ç‡∏•‡∏≤ 90110</div>
          <div class="school-contact">Tel. : 074-257884, Fax : 074-258107, E-mail : Kunlajin@gmail.com</div>
        </footer>
      </div>
      
      <!-- ‚úÖ Popup ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
      <div id="popup" class="popup-overlay-popup" onclick="closePopup(event)">
        <div class="popup-content-popup">
          <span class="close-btn-popup" onclick="closePopup(event)">&times;</span>
          <div class="visitors-text" id="popupText" style="text-align: center; margin-bottom: 20px;"></div>
          <div class="popup-gallery" id="popupGallery"></div>
        </div>
      </div>
      
      <!-- ‚úÖ Popup ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà -->
      <div id="fullImagePopup" class="popup-overlay-popup" onclick="closeFullImage(event)" style="display:none;">
        <div class="popup-content-full">
          <span class="close-btn-popup" onclick="closeFullImage(event)">&times;</span>
          <img id="fullImage" src="" alt="‡∏£‡∏π‡∏õ‡∏Ç‡∏¢‡∏≤‡∏¢" class="full-img">
        </div>
      </div>
      
      <!-- ‚úÖ JavaScript -->
      <script>
        // ===== Sidebar Functions =====
        const sidebarBtn = document.getElementById('sidebarBtn');
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const closeSidebarBtn = document.getElementById('closeSidebarBtn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
      
        function openSidebar() {
          sidebar.classList.add('active');
          overlay.style.display = 'block';
        }
      
        function closeSidebar() {
          sidebar.classList.remove('active');
          overlay.style.display = 'none';
        }
      
        sidebarBtn?.addEventListener('click', openSidebar);
        hamburgerBtn?.addEventListener('click', openSidebar);
        closeSidebarBtn?.addEventListener('click', closeSidebar);
        overlay?.addEventListener('click', closeSidebar);
      
        window.addEventListener('scroll', function () {
          const header = document.querySelector('header');
          if (window.scrollY > 50) {
            header.classList.add('scrolled');
          } else {
            header.classList.remove('scrolled');
          }
        });

        // ===== ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• visitors.json ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• =====
        async function loadVisitors() {
          try {
            // ‡∏õ‡∏£‡∏±‡∏ö path ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö backend ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
            const res = await fetch('/data/visitors.json');
            const visitors = await res.json();

            const gallery = document.querySelector('.visitors-gallery');
            gallery.innerHTML = '';

            if (!Array.isArray(visitors) || visitors.length === 0) {
              gallery.innerHTML = '<div style="color:gray;text-align:center;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</div>';
              return;
            }

            visitors.forEach(visitor => {
              // ‡∏™‡∏°‡∏°‡∏ï‡∏¥ visitor.images ‡πÄ‡∏õ‡πá‡∏ô array ‡∏Ç‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏ä‡πà‡∏ô ["img1.jpg","img2.jpg"]
              const images = (visitor.images || []).map(img => `../visitors/${img}`).join(',');

              const item = document.createElement('div');
              item.className = 'visitors-item';
              item.setAttribute('data-title', visitor.title || '');
              item.setAttribute('data-desc', visitor.desc || '');
              item.setAttribute('data-images', images);

              // ‡∏£‡∏π‡∏õ‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏Å
              const mainImg = document.createElement('img');
              mainImg.className = 'visitors-img';
              mainImg.src = visitor.images && visitor.images.length > 0 ? `../visitors/${visitor.images[0]}` : '../Image/logo.png';
              mainImg.alt = visitor.title || '';
              mainImg.onclick = function() { openPopup(this); };

              const textDiv = document.createElement('div');
              textDiv.className = 'visitors-text';
              textDiv.textContent = visitor.desc || '';

              item.appendChild(mainImg);
              item.appendChild(textDiv);

              gallery.appendChild(item);
            });
          } catch (err) {
            document.querySelector('.visitors-gallery').innerHTML = '<div style="color:red;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÑ‡∏î‡πâ</div>';
          }
        }

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à
        window.addEventListener('DOMContentLoaded', loadVisitors);

        // ===== Visitors Popup Functions =====
        function openPopup(clickedImg) {
          const parentItem = clickedImg.closest('.visitors-item');
          const desc = parentItem.getAttribute('data-desc') || '';
          const imagesStr = parentItem.getAttribute('data-images') || '';
          const imagePaths = imagesStr.split(',').filter(Boolean);

          document.getElementById('popupText').textContent = desc;

          const gallery = document.getElementById('popupGallery');
          gallery.innerHTML = ''; // Clear previous images

          imagePaths.forEach((src) => {
            const img = document.createElement('img');
            img.src = src.trim();
            img.className = 'popup-img';
            img.onclick = () => openFullImage(src.trim());
            gallery.appendChild(img);
          });

          document.getElementById('popup').style.display = 'flex';
        }
      
        function closePopup(event) {
          if (event.target.classList.contains('popup-overlay-popup') || event.target.classList.contains('close-btn-popup')) {
            document.getElementById('popup').style.display = 'none';
          }
        }
      
        function openFullImage(src) {
          document.getElementById('fullImage').src = src;
          document.getElementById('fullImagePopup').style.display = 'flex';
        }
      
        function closeFullImage(event) {
          if (event.target.classList.contains('popup-overlay-popup') || event.target.classList.contains('close-btn-popup')) {
            document.getElementById('fullImagePopup').style.display = 'none';
          }
        }
      </script>
      
</body>
  </html>